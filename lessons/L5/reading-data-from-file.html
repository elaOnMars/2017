

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-105019106-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reading data from a file &mdash; Geo-Python 2017 Autumn documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/geo-python.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Geo-Python 2017 Autumn documentation" href="../../index.html"/>
    <link href="../../_static/geo-python.css" rel="stylesheet" type="text/css">
     


  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Geo-Python
          

          
            
            <img src="../../_static/logo_hy_geo_135.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2017 Autumn
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/course-info.html">General info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/learning-goals.html">Learning goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/grading.html">Grading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/installing-anacondas.html">Installing Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/licensing.html">License and terms of usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L1/motivation.html">Motivation for the course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/lesson-video.html">Lecture materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/course-environment-components.html">Course environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/intro-to-cloud-environment.html">Using the cloud computing environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/slack-usage.html">Communicating with Slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/A-taste-of-Python.html">A taste of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/exercise-1.html">Exercise 1</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Geo-Python</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Reading data from a file</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/lessons/L5/reading-data-from-file.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reading-data-from-a-file">
<h1>Reading data from a file<a class="headerlink" href="#reading-data-from-a-file" title="Permalink to this headline">¶</a></h1>
<p>Our first task in this week&#8217;s lesson is to learn how to read data from
files. In Python this comprises two tasks: (1) Opening the file to be
able to read in the contents, and (2) reading in the contents of the
file. In terms of how the data is read in Python, there are many and we
will focus on one simple form. Later in the course you will be
introduced to more sophisticated libraries that can help with reading
data files, but for now we will focus on the traditional way in which
data files can be read in Python.</p>
<p>The data used in this part of the exercise is from the <a class="reference external" href="http://volcano.si.edu/">Smithsonian
Institution&#8217;s volcano database</a>.</p>
<div class="section" id="topics">
<h2>Topics<a class="headerlink" href="#topics" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><a class="reference external" href="#downloading-and-extracting-the-data">Downloading and extracting the
data</a></li>
<li><a class="reference external" href="#preparing-to-read-the-data-files-in-spyder">Preparing to read the data files in
**Spyder**</a></li>
<li><a class="reference external" href="#reading-an-entire-file-at-once">Reading an entire file at once</a></li>
<li><a class="reference external" href="#interacting-with-our-file-data">Interacting with our file data</a></li>
<li><a class="reference external" href="#skipping-file-headers-and-other-unwanted-data">Skipping file headers and other unwanted
data</a></li>
<li><a class="reference external" href="#pro-tips">Pro tips</a></li>
</ol>
</div>
<div class="section" id="downloading-and-extracting-the-data">
<h2>Downloading and extracting the data<a class="headerlink" href="#downloading-and-extracting-the-data" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>You can start by downloading the <a class="reference external" href="https://github.com/Python-for-geo-people/Lesson-5-Reading-Writing/raw/master/Data/volcano-data.zip">volcano data zip
file</a>
we will be using for this part of the lesson.</li>
</ol>
<ul class="simple">
<li>The Firefox browser will likely download the file to the
<code class="docutils literal"><span class="pre">Downloads</span></code> directory in the home directory of your computer
instance. If so, you should move the file into the home directory
using the file browser.</li>
</ul>
<ol class="arabic" start="2">
<li><p class="first">Once you have moved the <code class="docutils literal"><span class="pre">volcano-data.zip</span></code> file into your home
directory, you can unzip the file using the <code class="docutils literal"><span class="pre">unzip</span></code> command in the
Terminal window.</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ cd $HOME
$ unzip volcano-data.zip
$ ls volcano-data
GVP-Volcano-Lat-Lon-Elev.csv GVP-Volcano-List.csv
</pre></div>
</div>
<p>You should now have a directory titled <code class="docutils literal"><span class="pre">volcano-data</span></code> in your home
directory. It contains two files based on <a class="reference external" href="http://volcano.si.edu/list_volcano_holocene.cfm">version 4.5.1 of the
Smithsonian Institution&#8217;s Holocene volcano database (updated
23.9.2016)</a>:</p>
</li>
</ol>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">GVP-Volcano-List.csv</span></code>: The first 100 lines of the Holocene volcano
database file in <code class="docutils literal"><span class="pre">.csv</span></code> format and with header lines. <strong>Note</strong>:
Values are separated by semicolons (<code class="docutils literal"><span class="pre">;</span></code>) in this version of the
file rather than commas (<code class="docutils literal"><span class="pre">,</span></code>).</li>
<li><code class="docutils literal"><span class="pre">GVP-Volcano-Lat-Lon-Elev.csv</span></code>: The volcano ID, latitude, longitude
and elevation for the first 10 volcanoes in the Holocene volcano
database. There are no headers in this file and values are separated
by commas (<code class="docutils literal"><span class="pre">,</span></code>).</li>
</ul>
</div>
<div class="section" id="preparing-to-read-the-data-files-in-spyder">
<h2>Preparing to read the data files in <strong>Spyder</strong><a class="headerlink" href="#preparing-to-read-the-data-files-in-spyder" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Let&#8217;s start by opening <strong>Spyder</strong> by either double clicking on its
icon on the Desktop or typing <code class="docutils literal"><span class="pre">spyder</span></code> in the Terminal window.</p>
</li>
<li><p class="first">In order to use the data in the downloaded files, we need to change
the working directory in <strong>Spyder</strong> to be the <code class="docutils literal"><span class="pre">volcano-data</span></code>
directory in your home directory. This can be done by clicking on the
<strong>File explorer</strong> tab in the upper right pane of the <strong>Spyder</strong>
window and navigating to the <code class="docutils literal"><span class="pre">volcano-data</span></code> directory.</p>
</li>
<li><p class="first">After navigating to that directory, you should see the two data
files. However, you also need to tell the IPython window in
<strong>Spyder</strong> that the <code class="docutils literal"><span class="pre">volcano-data</span></code> directory is where we will be
working. This can be done by clicking on the button shown below to
set the console&#8217;s working directory to the one selected in the <strong>File
explorer</strong>.</p>
<p><img alt="Setting the Spyder directory" src="lessons\L5\../img/Spyder-directory.png" /> <em>Setting the working directory for
IPython in Spyder</em>.</p>
</li>
</ol>
<p>We should now be ready to continue and start working with our data
files.</p>
</div>
<div class="section" id="reading-an-entire-file-at-once">
<h2>Reading an entire file at once<a class="headerlink" href="#reading-an-entire-file-at-once" title="Permalink to this headline">¶</a></h2>
<p>There are several ways in which data can be read from a file in Python,
but some are more common (or better in some cases) than others. We will
focus on two ways to read files that can be easily used for many types
of data files.</p>
<ol class="arabic">
<li><p class="first">We will begin by reading an entire file into a Python list. To start
we need to open the file for reading by typing the following into the
<strong>Spyder</strong> editor:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-Lat-Lon-Elev.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">commands</span> <span class="n">to</span> <span class="n">read</span> <span class="n">file</span><span class="o">...&gt;</span>
</pre></div>
</div>
<p>Here we are using the <code class="docutils literal"><span class="pre">open()</span></code> function in combination with the
<code class="docutils literal"><span class="pre">with</span></code> statement in Python. I suppose an explanation is required.</p>
</li>
</ol>
<ul class="simple">
<li>The general format used for opening files in Python is
<code class="docutils literal"><span class="pre">open(&lt;filename&gt;,</span> <span class="pre">&lt;mode&gt;)</span></code>, where <code class="docutils literal"><span class="pre">filename</span></code> is the name of the
file and <code class="docutils literal"><span class="pre">mode</span></code> is either <code class="docutils literal"><span class="pre">&quot;r&quot;</span></code> for reading a file or <code class="docutils literal"><span class="pre">&quot;w&quot;</span></code> for
writing to a file. In our case, we open our file
(<code class="docutils literal"><span class="pre">&quot;GVP-Volcano-Lat-Lon-Elev.csv&quot;</span></code>) to be read (<code class="docutils literal"><span class="pre">&quot;r&quot;</span></code>).</li>
<li>In addition, we are using the <code class="docutils literal"><span class="pre">with</span></code> statement. What this does is
open our file and assign access to the file to a variable
(<code class="docutils literal"><span class="pre">infile</span></code>). Thus, using the variable <code class="docutils literal"><span class="pre">infile</span></code> we can access the
file contents anywhere within the indented block of code beneath the
<code class="docutils literal"><span class="pre">with</span></code> statement. For instance, we will see how to read the file in
the next point.</li>
<li>The main advantage of using the <code class="docutils literal"><span class="pre">with</span></code> statement is that normally
you need to manually close file access in Python (using the
<code class="docutils literal"><span class="pre">file.close()</span></code> method), but when using the <code class="docutils literal"><span class="pre">with</span></code> statement the
file is automatically closed at the end of the indented block. This
ensures you don&#8217;t forget to close it yourself. Closing files is
important because sometimes the final changes made to a file will not
be written until the file is closed, for example.</li>
</ul>
<ol class="arabic" start="2">
<li><p class="first">With our file open, we can now proceed to read the file.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">readall.py</span>

<span class="sd">A simple script for reading the entire contents of a file.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Read entire data file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-Lat-Lon-Elev.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>So what we have done here is to use the <code class="docutils literal"><span class="pre">file.read()</span></code> <em>method</em> to
read in the entire file as one long character string. What does that
mean? Well, this means that we now have a variable <code class="docutils literal"><span class="pre">data</span></code> that
contains the entire contents of our data file
(<code class="docutils literal"><span class="pre">GVP-Volcano-Lat-Lon-Elev.csv</span></code>). Thus, if we save the script above
as <code class="docutils literal"><span class="pre">readall.py</span></code> and run it in <strong>Spyder</strong>, we should see the
following output to the IPython window:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="mi">210010</span><span class="p">,</span><span class="mf">50.17</span><span class="p">,</span><span class="mf">6.85</span><span class="p">,</span><span class="mi">600</span>
<span class="mi">210020</span><span class="p">,</span><span class="mf">45.775</span><span class="p">,</span><span class="mf">2.97</span><span class="p">,</span><span class="mi">1464</span>
<span class="mi">210030</span><span class="p">,</span><span class="mf">42.17</span><span class="p">,</span><span class="mf">2.53</span><span class="p">,</span><span class="mi">893</span>
<span class="mi">210040</span><span class="p">,</span><span class="mf">38.87</span><span class="p">,</span><span class="o">-</span><span class="mf">4.02</span><span class="p">,</span><span class="mi">1117</span>
<span class="mi">211001</span><span class="p">,</span><span class="mf">43.25</span><span class="p">,</span><span class="mf">10.87</span><span class="p">,</span><span class="mi">500</span>
<span class="mi">211003</span><span class="p">,</span><span class="mf">42.6</span><span class="p">,</span><span class="mf">11.93</span><span class="p">,</span><span class="mi">800</span>
<span class="mi">211004</span><span class="p">,</span><span class="mf">41.73</span><span class="p">,</span><span class="mf">12.7</span><span class="p">,</span><span class="mi">949</span>
<span class="mi">211010</span><span class="p">,</span><span class="mf">40.827</span><span class="p">,</span><span class="mf">14.139</span><span class="p">,</span><span class="mi">458</span>
<span class="mi">211020</span><span class="p">,</span><span class="mf">40.821</span><span class="p">,</span><span class="mf">14.426</span><span class="p">,</span><span class="mi">1281</span>
<span class="mi">211030</span><span class="p">,</span><span class="mf">40.73</span><span class="p">,</span><span class="mf">13.897</span><span class="p">,</span><span class="mi">789</span>
</pre></div>
</div>
<p>No surprises here, this looks like the contents of the
<code class="docutils literal"><span class="pre">GVP-Volcano-Lat-Lon-Elev.csv</span></code> data file. If you want to confirm,
you&#8217;re welcome to open that file in the <strong>Spyder</strong> editor. Note that
you may have to set <strong>Files of type</strong> to be &#8220;All files (*)&#8221; in the
<strong>Open file</strong> window to see the data files.</p>
</li>
<li><p class="first">As mentioned, <code class="docutils literal"><span class="pre">file.read()</span></code> is a <em>method</em> for file objects that
reads all data in as a single (potentially very long) character
string. You can confirm this using the <code class="docutils literal"><span class="pre">type()</span></code> function.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">str</span>
</pre></div>
</div>
<p>Obviously, it is nice to read the entire file at once, but this may
be a problem for very large data files that may not fit in memory on
the computer.</p>
</li>
<li><p class="first">To convert our character string <code class="docutils literal"><span class="pre">data</span></code> into a more usable format in
which each line is a separate value in a Python list, we can use the
<code class="docutils literal"><span class="pre">str.splitlines()</span></code> method. Thus, we can create a list <code class="docutils literal"><span class="pre">datalist</span></code>
that contains each line of the file as follows:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">readall.py</span>

<span class="sd">A simple script for reading the entire contents of a file.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Read entire data file, separate lines in a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-Lat-Lon-Elev.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">datalist</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">datalist</span><span class="p">)</span>
</pre></div>
</div>
<p>Now each line of the data file will be a character string in the list
<code class="docutils literal"><span class="pre">datalist</span></code>. We can confirm this by running the example above, which
should output the following to the IPython console:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;210010,50.17,6.85,600&#39;</span><span class="p">,</span> <span class="s1">&#39;210020,45.775,2.97,1464&#39;</span><span class="p">,</span> <span class="s1">&#39;210030,42.17,2.53,893&#39;</span><span class="p">,</span> <span class="s1">&#39;210040,38.87,-4.02,1117&#39;</span><span class="p">,</span> <span class="s1">&#39;211001,43.25,10.87,500&#39;</span><span class="p">,</span> <span class="s1">&#39;211003,42.6,11.93,800&#39;</span><span class="p">,</span> <span class="s1">&#39;211004,41.73,12.7,949&#39;</span><span class="p">,</span> <span class="s1">&#39;211010,40.827,14.139,458&#39;</span><span class="p">,</span> <span class="s1">&#39;211020,40.821,14.426,1281&#39;</span><span class="p">,</span> <span class="s1">&#39;211030,40.73,13.897,789&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>We are now ready to start interacting with our file data.</p>
</li>
</ol>
</div>
<div class="section" id="interacting-with-our-file-data">
<h2>Interacting with our file data<a class="headerlink" href="#interacting-with-our-file-data" title="Permalink to this headline">¶</a></h2>
<p>We currently have a Python list <code class="docutils literal"><span class="pre">datalist</span></code> that contains our data file
contents. A common task in Python is to separate the values on each line
into separate Python lists that can be manipuated independently. Below,
we will create a set of 4 Python lists, one for each column in our data
file, and fill them with the values from the 10 lines of our file.</p>
<ol class="arabic">
<li><p class="first">We will first need to create our empty lists for storing the data
file values. We can do this by creating empty lists beneath the
indented block for reading the file.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">readall.py</span>

<span class="sd">A simple script for reading the entire contents of a file.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Read entire data file, separate lines in a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-Lat-Lon-Elev.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">datalist</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

<span class="c1"># Create empty lists to store file data</span>
<span class="n">VolcanoID</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Latitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Longitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Elevation</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p><strong>Note</strong>: These empty lists are not indented as part of the file
reading block.</p>
</li>
<li><p class="first">With the empty lists created, we now need to go through each line of
the file, separate the values on each line, and add them to the lists
we&#8217;ve created. We can do this using the <code class="docutils literal"><span class="pre">str.split()</span></code> method and a
<code class="docutils literal"><span class="pre">for</span></code> loop.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">readall.py</span>

<span class="sd">A simple script for reading the entire contents of a file.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Read entire data file, separate lines in a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-Lat-Lon-Elev.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">datalist</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

<span class="c1"># Create empty lists to store file data</span>
<span class="n">VolcanoID</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Latitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Longitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Elevation</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Loop over lines in file, append to lists</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">datalist</span><span class="p">:</span>
    <span class="n">splitline</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
    <span class="n">VolcanoID</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">Latitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">Longitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">Elevation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p>So, what happened?</p>
</li>
</ol>
<ul class="simple">
<li>First, we have used a <code class="docutils literal"><span class="pre">for</span></code> loop to go over each value in the list
<code class="docutils literal"><span class="pre">datalist</span></code>, assigning each line to the variable <code class="docutils literal"><span class="pre">line</span></code> in the
loop.</li>
<li>Second, we have created a new variable <code class="docutils literal"><span class="pre">splitline</span></code> that is itself a
Python list. In this case, <code class="docutils literal"><span class="pre">line.split(&quot;,&quot;)</span></code> separates all of the
values in the line at each comma (<code class="docutils literal"><span class="pre">,</span></code>) and stores the split values
in a list (<code class="docutils literal"><span class="pre">splitline</span></code>). You can see this list for the final line
in the data file by typing <code class="docutils literal"><span class="pre">print(splitline)</span></code> in the IPython
console.</li>
<li>Lastly, since each of the four values in each line of the data file
have been separated, we can add the values to the lists we&#8217;ve created
earlier using the <code class="docutils literal"><span class="pre">list.append()</span></code> method. In this case, we append
the corresponding values in the list <code class="docutils literal"><span class="pre">splitline</span></code> by using their
index values. This may seem complicated, but if you look at the code
line by line, we&#8217;re not really doing too many new things here.</li>
</ul>
</div>
<div class="section" id="skipping-file-headers-and-other-unwanted-data">
<h2>Skipping file headers and other unwanted data<a class="headerlink" href="#skipping-file-headers-and-other-unwanted-data" title="Permalink to this headline">¶</a></h2>
<p>In our example above, we had a data file with 10 lines, and each line
had 4 values separated by commas. It is more typical to deal with data
files that include <em>headers</em>, which describe the data in the file but
are not necessarily data that might be manipulated in a Python script.
Often we simply want to ignore these lines when creating variable lists
with data to manipulate. How headers are handled generally falls into
two categories.</p>
<div class="section" id="headers-of-a-known-number-of-lines">
<h3>Headers of a known number of lines<a class="headerlink" href="#headers-of-a-known-number-of-lines" title="Permalink to this headline">¶</a></h3>
<p>In many cases, the header in a data file will occupy the top few lines
of a data file and we can simply skip over the header by not storing
header data in the lists used for other file data. We can see and
example of how to do this by using the other data file for this part of
the lesson (<code class="docutils literal"><span class="pre">GVP-Volcano-List.csv</span></code>).</p>
<ol class="arabic">
<li><p class="first">Let&#8217;s start by editing the <code class="docutils literal"><span class="pre">readall.py</span></code> script we created above to
read the other data file (<code class="docutils literal"><span class="pre">GVP-Volcano-List.csv</span></code>) and saving the
modified file as <code class="docutils literal"><span class="pre">headread.py</span></code>.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">headread.py</span>

<span class="sd">A simple script for reading the entire contents of a file and skipping the header.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Read entire data file, separate lines in a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-List.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">datalist</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

<span class="c1"># Create empty lists to store file data</span>
<span class="n">VolcanoID</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Latitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Longitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Elevation</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Loop over lines in file, append to lists</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">datalist</span><span class="p">:</span>
    <span class="n">splitline</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
    <span class="n">VolcanoID</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">Latitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
    <span class="n">Longitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
    <span class="n">Elevation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
<p>So this looks a bit different than our earlier script. We&#8217;ve made
three significant changes to this point:</p>
</li>
</ol>
<ul class="simple">
<li>The script now opens the data file <code class="docutils literal"><span class="pre">GVP-Volcano-List.csv</span></code>, which
contains the first 100 lines of <a class="reference external" href="http://volcano.si.edu/list_volcano_holocene.cfm">version 4.5.1 of the Smithsonian
Institution&#8217;s Holocene volcano database (updated
23.9.2016)</a>.</li>
<li>Lines are split using the semicolon (<code class="docutils literal"><span class="pre">;</span></code>), rather than comma
(<code class="docutils literal"><span class="pre">,</span></code>) since the semicolon is used in this data file.</li>
<li>The index values of <code class="docutils literal"><span class="pre">splitline</span></code> have been changed to reflect the
fact that the latitude, longitude, and elevation data are in
different locations in this data file.</li>
</ul>
<ol class="arabic" start="2">
<li><p class="first">At this point, we know the first two lines of the data file are the
header, and these lines should be skipped when filling the lists of
the VolcanoID, etc. We can skip over the header lines by changing the
<code class="docutils literal"><span class="pre">for</span></code> loop used to split each line in the file as follows:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">headread.py</span>

<span class="sd">A simple script for reading the entire contents of a file and skipping the header.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Read entire data file, separate lines in a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-List.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">datalist</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

<span class="c1"># Create empty lists to store file data</span>
<span class="n">VolcanoID</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Latitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Longitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Elevation</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Loop over lines in file, append to lists, skip first 2 lines of file</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">datalist</span><span class="p">)):</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">datalist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">splitline</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
    <span class="n">VolcanoID</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">Latitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
    <span class="n">Longitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
    <span class="n">Elevation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
<p>Here we have made two key changes.</p>
</li>
</ol>
<ul class="simple">
<li>First, instead of having a <code class="docutils literal"><span class="pre">for</span></code> loop that loops over each line in
<code class="docutils literal"><span class="pre">datalist</span></code>, we not use the <code class="docutils literal"><span class="pre">range()</span></code> function to start at line 3
(index 2) and split lines in the file from there to the end of the
file, the index value corresponding to the length of the <code class="docutils literal"><span class="pre">datalist</span></code>
list.</li>
<li>Second, since we are now using the index variable <code class="docutils literal"><span class="pre">i</span></code> in the
<code class="docutils literal"><span class="pre">for</span></code> loop, we need to explicitly define the variable <code class="docutils literal"><span class="pre">line</span></code> for
each iteration in the loop. In this case, we simply set <code class="docutils literal"><span class="pre">line</span></code> to
be equal to the value at index <code class="docutils literal"><span class="pre">i</span></code> in the <code class="docutils literal"><span class="pre">datalist</span></code> list.</li>
</ul>
</div>
<div class="section" id="headers-beginning-with-a-certain-character">
<h3>Headers beginning with a certain character<a class="headerlink" href="#headers-beginning-with-a-certain-character" title="Permalink to this headline">¶</a></h3>
<p>Another common form of file header is one that starts with a specific
character, such as <code class="docutils literal"><span class="pre">#</span></code>. In this case we don&#8217;t need to know the number
of lines occupied by the header, but simply to ignore any line starting
with <code class="docutils literal"><span class="pre">#</span></code>, for example.</p>
<ol class="arabic">
<li><p class="first">We can start by taking a copy of the first example of the
<code class="docutils literal"><span class="pre">headread.py</span></code> script above and saving it as <code class="docutils literal"><span class="pre">charheadread.py</span></code>.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">charheadread.py</span>

<span class="sd">A simple script for reading the entire contents of a file and skipping a header starting with</span>
<span class="sd">a specific character.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Define starting character for headers/comments</span>
<span class="n">headchar</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span>

<span class="c1"># Read entire data file, separate lines in a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-List.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">datalist</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

<span class="c1"># Create empty lists to store file data</span>
<span class="n">VolcanoID</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Latitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Longitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Elevation</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Loop over lines in file, append to lists</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">datalist</span><span class="p">:</span>
    <span class="n">splitline</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
    <span class="n">VolcanoID</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">Latitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
    <span class="n">Longitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
    <span class="n">Elevation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
<p>Here all we have done is change the documentation string at the top
of the script and define the character <code class="docutils literal"><span class="pre">headchar</span></code> that should be
used to identify the start of a header (or comment) line in the data
file.</p>
</li>
<li><p class="first">Now we can modify the script within the <code class="docutils literal"><span class="pre">for</span></code> loop for processing
the lines of the file to ignore any line starting with <code class="docutils literal"><span class="pre">headchar</span></code>.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">charheadread.py</span>

<span class="sd">A simple script for reading the entire contents of a file and skipping a header starting with</span>
<span class="sd">a specific character.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Define starting character for headers/comments</span>
<span class="n">headchar</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span>

<span class="c1"># Read entire data file, separate lines in a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-List.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">datalist</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

<span class="c1"># Create empty lists to store file data</span>
<span class="n">VolcanoID</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Latitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Longitude</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Elevation</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Loop over lines in file, append to lists</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">datalist</span><span class="p">:</span>
    <span class="c1"># Append data only for lines that do not start with headchar</span>
    <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">headchar</span><span class="p">:</span>
        <span class="n">splitline</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
        <span class="n">VolcanoID</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">Latitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
        <span class="n">Longitude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
        <span class="n">Elevation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitline</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
<p>The change in this case is simple. We have added an <code class="docutils literal"><span class="pre">if</span></code> statement
to test if the first character of a given line is not equal to
<code class="docutils literal"><span class="pre">headchar</span></code>. If that condition is met, the line will be processed
normally. In this way, we will simply ignore lines starting with
<code class="docutils literal"><span class="pre">headchar</span></code>.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="pro-tips">
<h2>Pro tips<a class="headerlink" href="#pro-tips" title="Permalink to this headline">¶</a></h2>
<div class="section" id="spliting-lines-separated-by-other-characters">
<h3>Spliting lines separated by other characters<a class="headerlink" href="#spliting-lines-separated-by-other-characters" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="reading-an-entire-file-line-by-line">
<h3>Reading an entire file line-by-line<a class="headerlink" href="#reading-an-entire-file-line-by-line" title="Permalink to this headline">¶</a></h3>
<p>The example we&#8217;ve seen above will work nicely for small files, but often
it is easier to read file data line-by-line and not require storing the
entire file in memory. This is particularly beneficial in cases where
you extract only a small amount of the data in a file. Here we&#8217;ll
explore reading data from a file line by line.</p>
<p>We can start by using a similar template to that used earlier for
opening a file, but rather than using the <code class="docutils literal"><span class="pre">file.read()</span></code> method to read
the entire file, we will use a <code class="docutils literal"><span class="pre">for</span></code> loop to go over each line in the
file.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">readlines.py</span>

<span class="sd">A simple script for reading the contents of a file line by line in Python.</span>

<span class="sd">dwhipp - 2.10.2016</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Read entire data file, separate lines in a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;GVP-Volcano-Lat-Lon-Elev.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
    <span class="n">datalist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">infile</span><span class="p">:</span>
        <span class="n">datalist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we start by adding a new empty list <code class="docutils literal"><span class="pre">datalist</span></code> to which we will
append each line of the file that is read. The <code class="docutils literal"><span class="pre">for</span></code> loop that follows
will read each line in the file <code class="docutils literal"><span class="pre">infile</span></code> and allow us to manipulate
them one by one. In this way we could, for example, split each line as
it is read and store only some part of each line in the list
<code class="docutils literal"><span class="pre">datalist</span></code>. Depending on the size of data you encounter, this may be
the only way to handle your datasets.</p>
<p><strong>Next</strong>: <a class="reference external" href="reading-multiple-files.md">Reading multiple data files</a><strong>Home</strong>: <a class="reference external" href="https://github.com/Python-for-geo-people/Lesson-5-Reading-Writing">Lesson 5 main
page</a><strong>Previous</strong>: <a class="reference external" href="midterm-feedback.md">Summary of early course feedback</a></p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 Tenkanen &amp; Whipp, University of Helsinki.
      Last updated on Sep 05, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <p> <br/> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /> </a></p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2017 Autumn',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>