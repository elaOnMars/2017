

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-105019106-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Connecting Matplotlib with plotly &mdash; Geo-Python 2017 Autumn documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/GeoPython_favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/geo-python.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Geo-Python 2017 Autumn documentation" href="../../index.html"/>
        <link rel="next" title="Advanced plotting with Pandas" href="pandas-plotting.html"/>
        <link rel="prev" title="Plotting with Matplotlib" href="matplotlib.html"/>
    <link href="../../_static/geo-python.css" rel="stylesheet" type="text/css">
     


  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Geo-Python
          

          
            
            <img src="../../_static/logo_hy_geo_135.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2017 Autumn
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/course-info.html">General info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/learning-goals.html">Learning goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/grading.html">Grading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/installing-anacondas.html">Installing Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/python-vocabulary.html">Vocabulary - Basic terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/licensing.html">License and terms of usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L1/motivation.html">Motivation for the course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/course-environment-components.html">Course environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/intro-to-cloud-environment.html">Using the cloud computing environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/slack-usage.html">Communicating with Slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/A-taste-of-Python.html">A taste of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/exercise-1.html">Exercise 1</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L2/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/intro-to-GitHub.html">Introduction to Version Control and GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/GitHub-classroom.html">Using Classroom for Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/working-on-assignment.html">Working on the assignments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/python-basic-elements.html">Basic elements of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/writing-scripts.html">Writing your own Python scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/ex-2.html">Exercise 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/exercise-2-hints.html">Exercise 2 hints</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L3/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/for-loops.html"><code class="docutils literal"><span class="pre">for</span></code> loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/conditional-statements.html">Conditional statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/ex-3.html">Exercise 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/exercise-3-hints.html">Exercise 3 hints</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 4</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L4/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/modules.html">Loading and using modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/ex-4.html">Exercise 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/exercise-4-hints.html">Exercise 4 hints</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 5</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L5/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/pandas-overview.html">What is Pandas?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/pandas-basics.html">Exploring data using Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/pandas-basic-operations.html">Processing data with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/ex-5.html">Exercise 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/exercise-5-hints.html">Hints for Exercise 5</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 6</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L6/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/pandas-analysis.html">Advanced data processing with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/interpreting-errors.html">Dealing with errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/debugging-scripts.html">Debugging Python scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/ex-6.html">Exercise 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/exercise-6-hints.html">Hints for Exercise 6</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 7</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-plotting.html">Plotting in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot-anatomy.html">Anatomy of a plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="matplotlib.html">Plotting with Matplotlib</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Connecting Matplotlib with plotly</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#plotly-overview">Plotly overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-matplotlib-to-work-with-plotly">Configuring matplotlib to work with plotly</a></li>
<li class="toctree-l2"><a class="reference internal" href="#saving-your-first-matplotlib-plot-to-plotly">Saving your first matplotlib plot to plotly</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interacting-with-and-modifying-your-plot-on-plotly">Interacting with and modifying your plot on plotly</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pandas-plotting.html">Advanced plotting with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex-7.html">Exercise 7</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise-7-hints.html">Hints for Exercise 7</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Geo-Python</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Connecting Matplotlib with plotly</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/lessons/L7/using-plotly.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="connecting-matplotlib-with-plotly">
<h1>Connecting Matplotlib with plotly<a class="headerlink" href="#connecting-matplotlib-with-plotly" title="Permalink to this headline">¶</a></h1>
<p>In the final part of this week&#8217;s lesson, we will learn how to automatically export plots from <a class="reference external" href="http://matplotlib.org/">matplotlib</a> to <a class="reference external" href="https://plot.ly/">plotly</a>, where they can be manipulated and shared online.</p>
<div class="section" id="plotly-overview">
<h2>Plotly overview<a class="headerlink" href="#plotly-overview" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/plotly-site.png"><img alt="The plot.ly website" src="../../_images/plotly-site.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-text">The plot.ly website</span></p>
</div>
<p><a class="reference external" href="https://plot.ly/">Plotly</a> is a web-based collaborative data visualization site where you can easily produce interactive plots and perform basic statistical analyses of data.
On the site you can find hundreds of example plots that you can view, interact with, and edit.
Essentially, it is a social plotting and data analysis site, and fortunately the basic community accounts are free.
We&#8217;ll explore a few basic things we can do with plotly, mainly exporting matplotlib plots to plotly using <a class="reference external" href="https://plot.ly/matplotlib/">Plotly for Matplotlib</a>.
If you&#8217;re interested in learning more, you may want to start by looking at the <a class="reference external" href="http://help.plot.ly/tutorials/">plotly tutorials</a>.</p>
<p>We&#8217;re of the opinion that web-based interactive data is the future, and fortunately it is extremely easy to take your basic plots from matplotlib and directly export them to plotly.</p>
</div>
<div class="section" id="configuring-matplotlib-to-work-with-plotly">
<h2>Configuring matplotlib to work with plotly<a class="headerlink" href="#configuring-matplotlib-to-work-with-plotly" title="Permalink to this headline">¶</a></h2>
<p>The Plotly for Matplotlib modules are already installed on the computer instances for the course, but in order to be able to have plots in matplotlib automatically be tranferred to plotly, you need to have a special &#8220;API key&#8221; that connects your computer to your plotly account.</p>
<ol class="arabic">
<li><p class="first">You can find your personal API key by going to the <a class="reference external" href="https://plot.ly/settings/api">plotly API settings page</a>.
You will be asked to log in to access this page.</p>
</li>
<li><p class="first">After you have logged in, you should see the API settings page, which includes a value for your API key as shown in the image below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/plotly-api-key.png"><img alt="The plot.ly API key" src="../../_images/plotly-api-key.png" style="width: 800px;" /></a>
</div>
<p>You should select your plotly API key and copy it to the clipboard.</p>
</li>
<li><p class="first">After you have copied your plotly API key, you should go to the Terminal window on your computer instance.
If you have closed it, open another by double clicking on the <strong>Terminal</strong> icon on the Desktop.</p>
</li>
<li><p class="first">In the terminal window, enter the following command, substituting your plotly user name for <code class="docutils literal"><span class="pre">&lt;username&gt;</span></code> and your API key for <code class="docutils literal"><span class="pre">&lt;api</span> <span class="pre">key&gt;</span></code>.
<strong>Note</strong>: This should be done in a <strong>Terminal</strong> window, not an IPython console!</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ ipython -c &quot;import plotly; plotly.tools.set_credentials_file(username=&#39;&lt;username&gt;&#39;, api_key=&#39;&lt;api key&gt;&#39;)&quot;
</pre></div>
</div>
<p>This command will set up the connection between your computer instance and plotly.
<strong>Note</strong>: On the cloud computers, you will need to do this every time you start a new computer instance.
If you are working on your personal computer, you should only need to do this once (though you may need to <a class="reference external" href="https://plot.ly/matplotlib/getting-started/#installation">install plotly</a>).</p>
</li>
</ol>
<p>At this point you should be all set to start exporting plots to plotly.</p>
</div>
<div class="section" id="saving-your-first-matplotlib-plot-to-plotly">
<h2>Saving your first matplotlib plot to plotly<a class="headerlink" href="#saving-your-first-matplotlib-plot-to-plotly" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">To save plots to plotly, we basically just need to add a &#8220;wrapper&#8221; around the normal matplotlib commands you would use to make a plot.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="k">as</span> <span class="nn">py</span>

<span class="n">mpl_fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="c1"># --&gt; your matplotlib commands &lt;--</span>

<span class="n">unique_url</span> <span class="o">=</span> <span class="n">py</span><span class="o">.</span><span class="n">plot_mpl</span><span class="p">(</span><span class="n">mpl_fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;my first plotly plot&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>So that&#8217;s it?
Yes, all we need to do is <code class="docutils literal"><span class="pre">import</span></code> plotly and add a line where we use the plotly command to convert a matplotlib plot to plotly format and save to the plotly site (i.e., <code class="docutils literal"><span class="pre">py.plot_mpl()</span></code>).
Nice!</p>
</li>
<li><p class="first">OK, so now let&#8217;s look at a working example that can be saved to plotly.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Import modules</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="k">as</span> <span class="nn">py</span>

<span class="c1"># Create some data arrays</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">51</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Make a plot</span>
<span class="n">mpl_fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;ko--&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;sin(x) from -2*pi to 2*pi&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;sin(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Export plot to plotly</span>
<span class="n">unique_url</span> <span class="o">=</span> <span class="n">py</span><span class="o">.</span><span class="n">plot_mpl</span><span class="p">(</span><span class="n">mpl_fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;sin(x) test plot&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We&#8217;ve basically see all of this stuff for making the plot with matplotlib, but now we&#8217;re able to plot and save it directly to plotly by adding only 2 lines.
If all has gone well, your plot should open on plotly&#8217;s site after you run this example.</p>
</li>
</ol>
</div>
<div class="section" id="interacting-with-and-modifying-your-plot-on-plotly">
<h2>Interacting with and modifying your plot on plotly<a class="headerlink" href="#interacting-with-and-modifying-your-plot-on-plotly" title="Permalink to this headline">¶</a></h2>
<p>So the point of getting your plots on plotly is that you can interact with your data and share your plots on the web.
For example, in our test plot you can easily zoom in/out or hover over the plotted points to see their values.
However, you can also edit your plots in plotly to change everything from the colors of the lines or points to the type of the plot.
To edit your plot, simply click on <strong>Edit</strong> above your plot on the right side, as shown below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/plotly-interact.png"><img alt="Interacting with plot.ly" src="../../_images/plotly-interact.png" style="width: 800px;" /></a>
</div>
<p>There is a huge amount of editing that can be done for plotly plots.
For the purposes of class today, we&#8217;ll simply refer you to the <a class="reference external" href="http://help.plot.ly/tutorials/">plotly tutorials</a> to learn how to edit plots.</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p><strong>Task 4: Editing a plotly plot</strong></p>
<p class="last">For this task, simply take the test plot generated above, make 3 changes to its format, and save the updated plot to plotly.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pandas-plotting.html" class="btn btn-neutral float-right" title="Advanced plotting with Pandas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="matplotlib.html" class="btn btn-neutral" title="Plotting with Matplotlib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 Tenkanen &amp; Whipp, University of Helsinki.
      Last updated on Oct 19, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <p> <br/> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /> </a></p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2017 Autumn',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>