

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-105019106-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Exercise 7 hints &mdash; Geo-Python 2017 Autumn documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/geo-python.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Geo-Python 2017 Autumn documentation" href="../../index.html"/>
    <link href="../../_static/geo-python.css" rel="stylesheet" type="text/css">
     


  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Geo-Python
          

          
            
            <img src="../../_static/logo_hy_geo_135.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2017 Autumn
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/course-info.html">General info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/learning-goals.html">Learning goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/grading.html">Grading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/installing-anacondas.html">Installing Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/licensing.html">License and terms of usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L1/motivation.html">Motivation for the course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/lesson-video.html">Lecture materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/course-environment-components.html">Course environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/intro-to-cloud-environment.html">Using the cloud computing environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/slack-usage.html">Communicating with Slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/A-taste-of-Python.html">A taste of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/exercise-1.html">Exercise 1</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Geo-Python</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Exercise 7 hints</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/lessons/L7/hints.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="exercise-7-hints">
<h1>Exercise 7 hints<a class="headerlink" href="#exercise-7-hints" title="Permalink to this headline">¶</a></h1>
<div class="section" id="problem-1">
<h2>Problem 1<a class="headerlink" href="#problem-1" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="problem-2">
<h2>Problem 2<a class="headerlink" href="#problem-2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pseudocode">
<h3>Pseudocode<a class="headerlink" href="#pseudocode" title="Permalink to this headline">¶</a></h3>
<p>There is no pseudocode to post since the exercise included a starter
code. There are, however, some important practical tips below.</p>
</div>
<div class="section" id="practial-tips">
<h3>Practial tips<a class="headerlink" href="#practial-tips" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>Using plotly-friendly plot colors</strong>. One of the bad surprises this
week with plotly was that you cannot save your plots if they contain
any &#8220;pro&#8221; colors, like solid red, black or blue. One option that is
easy to implement is to simply give the commands in matplotlib that
produce different parts of the plot the <code class="docutils literal"><span class="pre">color</span></code> parameter. For
instance, when you plot a set of red points using <code class="docutils literal"><span class="pre">plt.plot()</span></code>, you
could change the formatting parameter from <code class="docutils literal"><span class="pre">'ro'</span></code> to simply
<code class="docutils literal"><span class="pre">'o'</span></code>, and add a parameter to the list for <code class="docutils literal"><span class="pre">color=&quot;#D62728&quot;</span></code>, the
&#8220;free&#8221; red on the plotly site. To be perfectly clear, this would look
like</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#D62728&quot;</span><span class="p">)</span>   <span class="c1"># This is OK for plotly</span>
</pre></div>
</div>
<p>rather than</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">)</span>   <span class="c1"># This uses the non-free &quot;pro&quot; red on plotly</span>
</pre></div>
</div>
<p>In fact, you could even go one step further and create a list of
colors at the top of your script, and use those with the <code class="docutils literal"><span class="pre">color</span></code>
option. For example,</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Define some plotly-friendly colors</span>
<span class="n">red</span><span class="o">=</span><span class="s2">&quot;#D62728&quot;</span>
<span class="n">blue</span><span class="o">=</span><span class="s2">&quot;#1F77B4&quot;</span>
<span class="n">dkgray</span><span class="o">=</span><span class="s2">&quot;#444444&quot;</span>

<span class="c1"># Make some plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">red</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;My amazing plot&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">dkgray</span><span class="p">)</span>
</pre></div>
</div>
<p>et voilà, your plot should now use plotly-friendly colors, which
means you can modify things <em>and save</em> without problems.</p>
</li>
<li><p class="first"><strong>Getting plots with a legend to export to plotly</strong>. Yet another
unpleasant surprise. As far as I can tell, it is currently not
possible to use matplotlib to create a line and symbol legend on a
plot, and have the exported to plotly. If you&#8217;ve tried this, you have
undoubtedly encountered problems. Fortunately, we have a solution,
albeit not a solution that is simply fixing a single line. To start,
we can compare the codes below for making a plot and exporting to
plotly. The top one will not work, the lower has been fixed to export
to plotly. The <code class="docutils literal"><span class="pre">...</span></code> lines are places where many other lines of
code exist, but are not relevant for this issue.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># THIS WILL NOT WORK WITH PLOTLY</span>

<span class="c1"># Import libraries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="k">as</span> <span class="nn">py</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="k">import</span> <span class="n">linregress</span>

<span class="o">...</span>

<span class="c1"># Add legend</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># Export figure to plotly</span>
<span class="n">unique_url</span> <span class="o">=</span> <span class="n">py</span><span class="o">.</span><span class="n">plot_mpl</span><span class="p">(</span><span class="n">mpl_fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;Seasonal average temperatures&quot;</span><span class="p">)</span>

<span class="o">...</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># THIS WILL WORK WITH PLOTLY</span>

<span class="c1"># Import libraries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="k">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.tools</span> <span class="k">as</span> <span class="nn">tls</span>   <span class="c1"># THIS IMPORT HAS BEEN ADDED</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="k">import</span> <span class="n">linregress</span>

<span class="o">...</span>

<span class="c1"># DO NOT USE plt.legend(), DO THIS INSTEAD</span>
<span class="n">plotly_fig</span> <span class="o">=</span> <span class="n">tls</span><span class="o">.</span><span class="n">mpl_to_plotly</span><span class="p">(</span><span class="n">mpl_fig</span><span class="p">)</span>   <span class="c1"># This makes a plotly figure from matplotlib</span>

<span class="c1"># Add plotly legend</span>
<span class="n">plotly_fig</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;showlegend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">plotly_fig</span><span class="p">[</span><span class="s1">&#39;layout&#39;</span><span class="p">][</span><span class="s1">&#39;legend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># Export to plotly</span>
<span class="n">plot_url</span> <span class="o">=</span> <span class="n">py</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">plotly_fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;Seasonal average temperatures&#39;</span><span class="p">)</span>

<span class="o">...</span>
</pre></div>
</div>
<p>As you can see, this is not a one-line fix, but it is also not that
complicated. In essence, we need to <code class="docutils literal"><span class="pre">import</span> <span class="pre">plotly.tools</span> <span class="pre">as</span> <span class="pre">tls</span></code>,
and replace the use of <code class="docutils literal"><span class="pre">plt.legend()</span></code> and <code class="docutils literal"><span class="pre">py.ploy(...)</span></code> with the
corresponding commands to have plotly create the legend. In this way,
your plots should go nicely to plotly, including the legend. If you
combine this fix with the plotly colors tip above, you should be in
business!</p>
</li>
<li><p class="first"><strong>Example data files</strong> In case you don&#8217;t yet have Exercises 5 or 6
working properly, we would still like you to be able to complete
Exercise 7. For that task we have provided example data files
produced by Exercises 5 and 6. For these data files, the data starts
at 1940 and ends at 2015, which simply allows us to see whether
you&#8217;ve used your own data file you produced, or the example data
files. Otherwise, they should be identical to the expected results
from Exercises 5 and 6. Links to the files are below.</p>
</li>
<li><p class="first"><a class="reference external" href="../Data/summer-avg-temps-ex5.csv">Summer temperatures from Exercise
5</a></p>
</li>
<li><p class="first"><a class="reference external" href="../Data/summer-avg-temps-ex6.csv">Summer temperatures from Exercise
6</a></p>
</li>
<li><p class="first"><a class="reference external" href="../Data/winter-avg-temps-ex5.csv">Winter temperatures from Exercise
5</a></p>
</li>
<li><p class="first"><a class="reference external" href="../Data/winter-avg-temps-ex6.csv">Winter temperatures from Exercise
6</a></p>
</li>
<li><p class="first"><strong>Using ``linregress()``</strong></p>
</li>
<li><p class="first"><strong>Modifying the axis ranges</strong></p>
</li>
<li><p class="first"><strong>Useful links from this week&#8217;s lesson</strong></p>
</li>
</ul>
<p><strong>Home</strong>: <a class="reference external" href="https://github.com/Python-for-geo-people/Lesson-7-Plotting">Lesson 7 main
page</a><strong>Previous</strong>: <a class="reference external" href="https://classroom.github.com/assignment-invitations/54ad87560677b78169f1c18717bb312e">Exercise 7: Plotting with
Python</a></p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 Tenkanen &amp; Whipp, University of Helsinki.
      Last updated on Sep 05, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <p> <br/> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /> </a></p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2017 Autumn',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>