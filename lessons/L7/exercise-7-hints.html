

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-105019106-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hints for Exercise 7 &mdash; Geo-Python 2017 Autumn documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/GeoPython_favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/geo-python.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Geo-Python 2017 Autumn documentation" href="../../index.html"/>
        <link rel="prev" title="Exercise 7" href="ex-7.html"/>
    <link href="../../_static/geo-python.css" rel="stylesheet" type="text/css">
     


  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Geo-Python
          

          
            
            <img src="../../_static/logo_hy_geo_135.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2017 Autumn
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/course-info.html">General info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/learning-goals.html">Learning goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/grading.html">Grading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/installing-anacondas.html">Installing Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/python-vocabulary.html">Vocabulary - Basic terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/licensing.html">License and terms of usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L1/motivation.html">Motivation for the course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/course-environment-components.html">Course environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/intro-to-cloud-environment.html">Using the cloud computing environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/slack-usage.html">Communicating with Slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/A-taste-of-Python.html">A taste of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/exercise-1.html">Exercise 1</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L2/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/intro-to-GitHub.html">Introduction to Version Control and GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/GitHub-classroom.html">Using Classroom for Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/working-on-assignment.html">Working on the assignments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/python-basic-elements.html">Basic elements of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/writing-scripts.html">Writing your own Python scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/ex-2.html">Exercise 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/exercise-2-hints.html">Exercise 2 hints</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L3/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/for-loops.html"><code class="docutils literal"><span class="pre">for</span></code> loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/conditional-statements.html">Conditional statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/ex-3.html">Exercise 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/exercise-3-hints.html">Exercise 3 hints</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 4</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L4/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/modules.html">Loading and using modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/ex-4.html">Exercise 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/exercise-4-hints.html">Exercise 4 hints</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 5</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L5/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/pandas-overview.html">What is Pandas?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/pandas-basics.html">Exploring data using Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/pandas-basic-operations.html">Processing data with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/ex-5.html">Exercise 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/exercise-5-hints.html">Hints for Exercise 5</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 6</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L6/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/pandas-analysis.html">Advanced data processing with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/interpreting-errors.html">Dealing with errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/debugging-scripts.html">Debugging Python scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/ex-6.html">Exercise 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L6/exercise-6-hints.html">Hints for Exercise 6</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 7</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="lesson-video.html">Lecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-plotting.html">Plotting in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot-anatomy.html">Anatomy of a plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="matplotlib.html">Plotting with Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-plotly.html">Connecting Matplotlib with plotly</a></li>
<li class="toctree-l1"><a class="reference internal" href="pandas-plotting.html">Advanced plotting with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex-7.html">Exercise 7</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Hints for Exercise 7</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#converting-a-column-of-date-strings-into-datetime-format">Converting a column of date-strings into datetime format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-an-empty-dataframe-with-a-datetime-index">Creating an empty DataFrame with a datetime index</a></li>
<li class="toctree-l2"><a class="reference internal" href="#slicing-up-the-seasons">Slicing up the seasons</a></li>
<li class="toctree-l2"><a class="reference internal" href="#labels-and-legends">Labels and legends</a></li>
<li class="toctree-l2"><a class="reference internal" href="#saving-multiple-plots-into-a-directory">Saving multiple plots into a directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-an-animation-from-multiple-images">Creating an animation from multiple images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-animation">Creating the animation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Geo-Python</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Hints for Exercise 7</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/lessons/L7/exercise-7-hints.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hints-for-exercise-7">
<h1>Hints for Exercise 7<a class="headerlink" href="#hints-for-exercise-7" title="Permalink to this headline">¶</a></h1>
<div class="section" id="converting-a-column-of-date-strings-into-datetime-format">
<h2>Converting a column of date-strings into datetime format<a class="headerlink" href="#converting-a-column-of-date-strings-into-datetime-format" title="Permalink to this headline">¶</a></h2>
<p>In some cases Pandas cannot understand and parse automatically the date information from a column when you read the
data with <code class="docutils literal"><span class="pre">read_csv()</span></code> function. In these cases, you need to parse the date information afterwards.</p>
<p>Let&#8217;s see an example with following data</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">DATE</span><span class="p">,</span> <span class="n">Value</span>
<span class="s2">&quot;201401&quot;</span><span class="p">,</span> <span class="mi">1</span>
<span class="s2">&quot;201402&quot;</span><span class="p">,</span> <span class="mi">2</span>
<span class="s2">&quot;201403&quot;</span><span class="p">,</span> <span class="mi">3</span>
<span class="s2">&quot;201404&quot;</span><span class="p">,</span> <span class="mi">5</span>
</pre></div>
</div>
<p>Let&#8217;s try to read the data and parse the date.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[2]: </span><span class="go"></span>
<span class="go">     DATE   Value</span>
<span class="go">0  201401       1</span>
<span class="go">1  201402       2</span>
<span class="go">2  201403       3</span>
<span class="go">3  201404       5</span>

<span class="gp">In [3]: </span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span>
<span class="go">                                                                                                   Out[3]: </span>
<span class="go">DATE      object</span>
<span class="go"> Value     int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>As we can see from above, Pandas was not able to convert the datatype of <code class="docutils literal"><span class="pre">DATE</span></code> into <code class="docutils literal"><span class="pre">datetime</span></code> format.
This is because the DATE values does not include information about the day of the year but only the year and month.</p>
<p>There is a way to tell to Pandas to read the <code class="docutils literal"><span class="pre">DATE</span></code> information with a custom format such as the one we have here
with <code class="docutils literal"><span class="pre">pd.to_timestamp()</span></code> function where we can specify with <code class="docutils literal"><span class="pre">format</span></code> parameter the custom format how the dates
are represented in the data. Consider following example:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">],</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;%Y%m&#39;</span><span class="p">)</span>

<span class="gp">In [5]: </span><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="go">     DATE   Value   datetime</span>
<span class="go">0  201401       1 2014-01-01</span>
<span class="go">1  201402       2 2014-02-01</span>
<span class="go">2  201403       3 2014-03-01</span>
<span class="go">3  201404       5 2014-04-01</span>

<span class="gp">In [6]: </span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span>
<span class="go">                                                                                                                                                          Out[6]: </span>
<span class="go">DATE                object</span>
<span class="go"> Value               int64</span>
<span class="go">datetime    datetime64[ns]</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Great, now we have the data in <code class="docutils literal"><span class="pre">datetime</span></code> format!</p>
</div>
<div class="section" id="creating-an-empty-dataframe-with-a-datetime-index">
<h2>Creating an empty DataFrame with a datetime index<a class="headerlink" href="#creating-an-empty-dataframe-with-a-datetime-index" title="Permalink to this headline">¶</a></h2>
<p>For Problem 2 in this exercise you are asked to calculate average seasonal ages for each year in our data file.
The easiest way to do this is to create an empty DataFrame to store the seaonal temperatures, with one temperature for each year and season.
Thus, the DataFrame should have columns for each season and the date as an index.
In order to do this, we&#8217;ll need first to create a variable to store the dates for the index, then create the DataFrame using that index.
Let&#8217;s consider an example for my world, where there are two seasons: <code class="docutils literal"><span class="pre">coldSeason</span></code> and <code class="docutils literal"><span class="pre">warmSeason</span></code>.
For each season, I want list the number of times I wore a jacket, with data from the past 4 years.
I can start by making a variable with 1 date for each of the past 4 years using the Pandas <code class="docutils literal"><span class="pre">pd.date_range()</span></code> function.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">timeIndex</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2014&#39;</span><span class="p">,</span> <span class="s1">&#39;2017&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;AS&#39;</span><span class="p">)</span>

<span class="gp">In [8]: </span><span class="k">print</span><span class="p">(</span><span class="n">timeIndex</span><span class="p">)</span>
<span class="go">DatetimeIndex([&#39;2014-01-01&#39;, &#39;2015-01-01&#39;, &#39;2016-01-01&#39;, &#39;2017-01-01&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;AS-JAN&#39;)</span>
</pre></div>
</div>
<p>As you can see, we now have a variable <code class="docutils literal"><span class="pre">timeIndex</span></code> in the Pandas datetime format with dates for January 1 of the past 4 years.
The starting and ending years are clear, and the <code class="docutils literal"><span class="pre">freq='AS'</span></code> indicates the frequecy of dates between the listed starting and ending times.
In this case, <code class="docutils literal"><span class="pre">AS</span></code> refers to annual values (1 time per year) at the start of the year.</p>
<p>With the <code class="docutils literal"><span class="pre">timeIndex</span></code> variable, we can now create our empty DataFrame to store the seasonal jacket numbers using the Pandas <code class="docutils literal"><span class="pre">pd.DataFrame()</span></code> function.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">seasonData</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">timeIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;coldSeason&#39;</span><span class="p">,</span> <span class="s1">&#39;warmSeason&#39;</span><span class="p">])</span>

<span class="gp">In [10]: </span><span class="k">print</span><span class="p">(</span><span class="n">seasonData</span><span class="p">)</span>
<span class="go">           coldSeason warmSeason</span>
<span class="go">2014-01-01        NaN        NaN</span>
<span class="go">2015-01-01        NaN        NaN</span>
<span class="go">2016-01-01        NaN        NaN</span>
<span class="go">2017-01-01        NaN        NaN</span>
</pre></div>
</div>
<p>Now we have our empty DataFrame where I can fill in the number of times I needed a jacket in each season using the date index!</p>
</div>
<div class="section" id="slicing-up-the-seasons">
<h2>Slicing up the seasons<a class="headerlink" href="#slicing-up-the-seasons" title="Permalink to this headline">¶</a></h2>
<p>The other main task in Problem 2 is to sort values from the different months into seasonal average values.
There are several ways in which this can be done, but one nice way to do it is using a <code class="docutils literal"><span class="pre">for</span></code> loop to loop over each year of data you consider and then fill in the seasonal values for that year.
For each year, you want to identify the slice of dates that correspond to that season, calculate their mean, then store that result in the corresponding location in the new DataFrame created in the previous hint.
For the <code class="docutils literal"><span class="pre">for</span></code> loop itself, it may be easiest to start with the second full year of data (1953), since we do not have temperatures for December of 1951.
If you loop over the years from 1953-2016, you can then easily calculate the seasonal average temperatures for each season.
For the winter, you can use <code class="docutils literal"><span class="pre">year</span> <span class="pre">-</span> <span class="pre">1</span></code> to find the temperature for December, assuming <code class="docutils literal"><span class="pre">year</span></code> is your variable for the current year in your <code class="docutils literal"><span class="pre">for</span></code> loop. This approach can be used also in relation to Problem 3 and 4.</p>
<p>In <a class="reference external" href="https://geo-python.github.io/2017/lessons/L7/pandas-plotting.html#selecting-data-based-on-time-in-pandas">this week&#8217;s lesson</a> we saw how to select a range of dates, but we did not cover how to take the mean value of the slice and store it.
Because a slice of a DataFrame is still a DataFrame object, we can simply use the <code class="docutils literal"><span class="pre">.mean()</span></code> method to calculate the mean of that slice.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">meanValue</span> <span class="o">=</span> <span class="n">dataFrame</span><span class="p">[</span><span class="s1">&#39;2016-12&#39;</span><span class="p">:</span><span class="s1">&#39;2017-02&#39;</span><span class="p">][</span><span class="s1">&#39;TEMP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
<p>This would assign the mean value for the <code class="docutils literal"><span class="pre">TEMP</span></code> field between December 2016 and February 2017 to the variable <code class="docutils literal"><span class="pre">meanValue</span></code>.
In terms of storing the output value, we can use the <code class="docutils literal"><span class="pre">DataFrame.loc()</span></code> function.
For example:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">dataFrame</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">year</span><span class="p">,</span> <span class="s1">&#39;coldSeason&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
<p>This would store the value <code class="docutils literal"><span class="pre">5</span></code> in the column <code class="docutils literal"><span class="pre">coldSeason</span></code> at index <code class="docutils literal"><span class="pre">year</span></code> of <code class="docutils literal"><span class="pre">dataFrame</span></code>.
That&#8217;s a tricky sentence, but hopefully the idea is clear :).</p>
</div>
<div class="section" id="labels-and-legends">
<h2>Labels and legends<a class="headerlink" href="#labels-and-legends" title="Permalink to this headline">¶</a></h2>
<p>In the plot for Problem 2 you&#8217;re asked to include a line legend for each subplot.
To do this, you need to do two things:</p>
<ol class="arabic simple">
<li>You need to add a <code class="docutils literal"><span class="pre">label</span></code> value when you create the plot using the <code class="docutils literal"><span class="pre">plt.plot()</span></code> function.
This is as easy as adding a parameter that say <code class="docutils literal"><span class="pre">label='some</span> <span class="pre">text'</span></code> when you call <code class="docutils literal"><span class="pre">plt.plot()</span></code>.</li>
<li>You&#8217;ll need to display the line legend, which can be done by calling <code class="docutils literal"><span class="pre">plt.legend()</span></code> for each subplot.</li>
</ol>
</div>
<div class="section" id="saving-multiple-plots-into-a-directory">
<h2>Saving multiple plots into a directory<a class="headerlink" href="#saving-multiple-plots-into-a-directory" title="Permalink to this headline">¶</a></h2>
<p>In Problems 3 and 4 the aim is to create 65 individual plots, and save those into your computer.
In these kind of situations, the smartest thing to do is to use a <code class="docutils literal"><span class="pre">for</span></code> loop and at the end of each
loop, save the image into a folder that you have specified. There are some useful tricks related to saving
files and generating good file names automatically.</p>
<p>A good approach when saving multiple files into a folder, is to define a separate variable where you store
only the directory path. Then during every loop you combine this directory path, and the file name together.
This can be done by using a function <code class="docutils literal"><span class="pre">os.path.join()</span></code> which is part of <code class="docutils literal"><span class="pre">os</span></code> built-in Python module.</p>
<p>Consider following example:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="kn">import</span> <span class="nn">os</span>

<span class="gp">In [12]: </span><span class="n">myfolder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\MyUserName\Temp_visualizations&quot;</span>

<span class="gp">In [13]: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;My_File_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span>
<span class="gp">   ....: </span>    <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">myfolder</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="go">C:\MyUserName\Temp_visualizations/My_File_0.png</span>
<span class="go">C:\MyUserName\Temp_visualizations/My_File_1.png</span>
<span class="go">C:\MyUserName\Temp_visualizations/My_File_2.png</span>
<span class="go">C:\MyUserName\Temp_visualizations/My_File_3.png</span>
<span class="go">C:\MyUserName\Temp_visualizations/My_File_4.png</span>
</pre></div>
</div>
<p>Here, we created a folder path and a unique filename, and in the end parsed a full filepath that could be
used to save a plot into that location on your computer.</p>
</div>
<div class="section" id="creating-an-animation-from-multiple-images">
<h2>Creating an animation from multiple images<a class="headerlink" href="#creating-an-animation-from-multiple-images" title="Permalink to this headline">¶</a></h2>
<p>In Problems 3 and 4 the aim was to plot multiple images on a predefined folder. An optional task
was to create an animation out of those figures. Animating the figures in Problems 3 and 4 is fairly
straightforward task to do in Python. All you need to do is to install a module called <code class="docutils literal"><span class="pre">imageio</span></code> and
run couple lines of code that I show below.</p>
<p>But, first you need to install <code class="docutils literal"><span class="pre">imageio</span></code> module.</p>
<p>Installing the module can be done by running following command <strong>from the command prompt / terminal</strong> with <strong>admin rights</strong>:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>$ conda install -c conda-forge imageio
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If everything works fine you should not see any errors coming into the screen. If you receive an error, the most typical
one is that you did not have <strong>admin rights</strong> when trying to install the module. In such case, you should open command prompt
with admin rights (Command prompt &#8211;&gt; right click &#8211;&gt; Run as administrator..)</p>
</div>
<p>When you have imageio installed you should be able to import it, in Spyder:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="kn">import</span> <span class="nn">imageio</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="nn">&lt;ipython-input-14-351220486d6a&gt;</span> in <span class="ni">&lt;module&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">imageio</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;imageio&#39;
</pre></div>
</div>
<div class="section" id="creating-the-animation">
<h3>Creating the animation<a class="headerlink" href="#creating-the-animation" title="Permalink to this headline">¶</a></h3>
<p>Following commands should produce a nice gif-animation out of your plots. The idea is that you list all the
files from the folder where you saved the plots using <code class="docutils literal"><span class="pre">glob</span></code> function, and then pass that file list into imageio
function called <code class="docutils literal"><span class="pre">imageio.mimsave()</span></code>. A following example shows how to do that.</p>
<p>First we list all the files from folder that has <code class="docutils literal"><span class="pre">.png</span></code> file format using <code class="docutils literal"><span class="pre">glob</span></code>. The <code class="docutils literal"><span class="pre">*</span></code> wildcard character tells to computer that
the name of the file can be anything (the purpose of the star). <code class="docutils literal"><span class="pre">.png</span></code> after the star tells that the filename should end with <code class="docutils literal"><span class="pre">.png</span></code> characters.
If there are some other files with other file format than .png, they will be excluded.
Finally, we create the animation into the computer.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">imageio</span>

<span class="c1"># Find all files from given folder that has .png file-format</span>
<span class="n">search_criteria</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\MyUserName\Temp_visualizations\*.png&quot;</span>

<span class="c1"># Execute the glob function that returns a list of filepaths</span>
<span class="n">figure_paths</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">search_criteria</span><span class="p">)</span>

<span class="c1"># Save the animation to disk with 48 ms durations</span>
<span class="n">output_gif_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\MyUserName\Temp_animation.gif&quot;</span>
<span class="n">imageio</span><span class="o">.</span><span class="n">mimsave</span><span class="p">(</span><span class="n">output_gif_path</span><span class="p">,</span> <span class="p">[</span><span class="n">imageio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span> <span class="k">for</span> <span class="n">fp</span> <span class="ow">in</span> <span class="n">figure_paths</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="mf">0.48</span><span class="p">,</span> <span class="n">subrectangles</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>With these lines of code you should be able to create a nice animation out of your plots!</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="ex-7.html" class="btn btn-neutral" title="Exercise 7" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 Tenkanen &amp; Whipp, University of Helsinki.
      Last updated on Feb 16, 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <p> <br/> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /> </a></p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2017 Autumn',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>